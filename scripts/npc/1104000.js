
var quiz = new Array("몬스터 관련 자음 퀴즈 입니다.\r\n\r\nㅂㄴㄱㄹ\r\n\r\n%불너구리%4",
"몬스터 관련 자음 퀴즈 입니다.\r\n\r\nㄷㅍㅇ \r\n\r\n\r\n%달팽이%3",
"아이템 관련 자음 퀴즈 입니다.\r\n\r\nㅁㅂ ㅌㅊㅇ\r\n\r\n\r\n%만병 통치약%5",
"아이템 관련 자음 퀴즈 입니다.\r\n\r\nㄴㅁㅇ ㄱㄱㅇ\r\n\r\n\r\n%나뭇잎 귀걸이%6",
"몬스터 관련 자음 퀴즈 입니다.\r\n\r\nㄴㅅㅌ ㄱㄹ\r\n\r\n\r\n%네스트 골렘%5",
"아이템 관련 자음 퀴즈 입니다.\r\n\r\nㅊㄷㅂㅅㅇ\r\n\r\n\r\n%천도복숭아%5",
"엔피시 관련 자음 퀴즈 입니다.\r\n\r\nㄱㅈㅅㄱ\r\n\r\n\r\n%괘종시계%4",
"엔피시 관련 자음 퀴즈 입니다.\r\n\r\nㅋㄹㅌ\r\n\r\n\r\n%카르타%3",
"몬스터 관련 자음 퀴즈 입니다.\r\n\r\nㅂㄹㄷ ㅎㅍ\r\n\r\n%블러드 하프%5",
"엔피시 관련 자음 퀴즈 입니다.\r\n\r\nㅈㄴㄱ ㅂㅈ ㄷㅂ\r\n\r\n%장난감 병정 델브%7",
"몬스터 관련 자음 퀴즈 입니다.\r\n\r\nㄱㅅㅌㅍ\r\n\r\n\r\n%고스텀프%4",
"몬스터 관련 자음 퀴즈 입니다.\r\n\r\nㅋㄹ\r\n\r\n\r\n%크립%2",
"아이템 관련 자음 퀴즈 입니다.\r\n\r\nㅌㅇㄹㅅ ㅊㅇㅅㅌ *공백포함\r\n\r\n\r\n%타임리스 차알스톤%8",
"아이템 관련 자음 퀴즈 입니다.\r\n\r\nㅅㄹㅅ ㅇㅍㅋㅅ\r\n\r\n\r\n%사령실 워프캡슐%7",
"아이템 관련 자음 퀴즈 입니다.\r\n\r\nㅃㄱㅅ ㅁㄱㅁㅈ\r\n\r\n\r\n%빨간색 물개모자%7",
"몬스터 관련 자음 퀴즈 입니다.\r\n\r\nㄹㅇㅈ ㅂㅍ\r\n\r\n\r\n%레이지 버피%5",
"몬스터 관련 자음 퀴즈 입니다.\r\n\r\nㅇㅇㅇ ㅁㅌ\r\n\r\n\r\n%아이언 뮤테%5",
"엔피시 관련 자음 퀴즈 입니다.\r\n\r\nㄷㅋ ㄹㄷ\r\n\r\n\r\n%다크 로드%4",
"몬스터 관련 자음 퀴즈 입니다.\r\n\r\nㅎㄹㅇ ㅈㅇㅎ\r\n\r\n\r\n%훈련용 짚인형%6",
"엔피시 관련 자음 퀴즈 입니다.\r\n\r\nㅇㄹㅂㅅ ㅁㅂㅅ\r\n\r\n\r\n%오르비스 마법석%7",
"엔피스 관련 자음 퀴즈 입니다.\r\n\r\nㅁㄹㅌ\r\n\r\n\r\n%무라트%3",
"아이템 관련 자음 퀴즈 입니다.\r\n\r\nㄸㄸㅇ ㅎㄷㄱ\r\n\r\n\r\n%뚱뚱이 핫도그%6",
"엔피시 관련 자음 퀴즈 입니다.\r\n\r\nㄹㅂㅅ\r\n\r\n\r\n%로빈슨%3",
"몬스터 관련 자음 퀴즈 입니다.\r\n\r\nㅇㅇㄷ ㅋㄱ\r\n\r\n%와일드 카고%5",
"아이템 관련 자음 퀴즈 입니다.\r\n(공백까지 포함해야 합니다.)\r\n\r\nㅌㅇㄹㅅ ㅇㅅㅋㅅㄴㅅ\r\n\r\n\r\n%타임리스 엑서큐서너스%10",
"몬스터 관련 자음 퀴즈 입니다.\r\n\r\nㅇㅇㄷ ㅋㄱ\r\n\r\n%와일드 카고%5",
"몬스터 관련 자음 퀴즈 입니다.\r\n\r\nㄴㅇ ㄷㄹㅈ\r\n\r\n\r\n%늙은 도라지%5",
"아이템 관련 자음 퀴즈 입니다.\r\n\r\nㅇㄱㅇㅇ ㅇㅇㅅ\r\n\r\n\r\n%아기용의 이유식%7",
"엔피시 관련 자음 퀴즈 입니다.\r\n\r\nㅅㄹㄱ ㄹㅋ\r\n\r\n\r\n%수리공 로키%5",
"아이템 관련 자음 퀴즈 입니다.\r\n\r\nㅅㄷ ㅇㅇㄹ\r\n\r\n%소드 이어링%5");

importPackage(java.awt);
importPackage(java.lang);
importPackage(Packages.tools.RandomStream);
importPackage(Packages.packet.creators);


var status = -1;

function start() {
    status = -1;
    action (1, 0, 0);
}

function action(mode, type, selection) {
    if (mode == -1 || mode == 0) {
        cm.dispose();
        return;
    }
    if (mode == 1) {
        status++;
    }
    
    if (status == 0) {
        if (cm.getPlayer().getEventInstance() == null) {
            cm.warp(100000000);
            cm.dispose();
            return;
        }
        var eim = cm.getPlayer().getEventInstance();
        if (eim.getProperty("2P_Progress").equals("0")) {
            cm.sendNext("으하하하하하하! 어떻게 여기까지 왔는지는 모르겠지만, 여기까지 온 이상 죽어줘야겠다. 이곳을 넘어가고 싶다면.. 내가 내는 문제를 맞춰야 한다. 맞추지 못하면... 후후후 넌 영원히 이곳에서 갇히는거야! 음하하하하!!!");
        } else if (eim.getProperty("2P_Progress").equals("1")) {
            var num = Integer.parseInt(eim.getProperty("2P_QuizNum"));
            var quizThing = quiz[num].split("%");
            var question = quizThing[0];
            cm.sendGetText("후후후... 절대 맞추지 못할거다!\r\n\r\n"+question);
        } 
    } else if (status == 1) {
        var eim = cm.getPlayer().getEventInstance();
        if (eim.getProperty("2P_Progress").equals("0")) {
            eim.setProperty("2P_Progress", "1");
            var rand = Randomizer.nextInt(quiz.length);
            eim.setProperty("2P_QuizNum", rand+"");
            cm.getPlayer().getMap().startMapEffect("프란시스를 다시 클릭하여 퀴즈를 해결하세요!", 5120035);
            cm.dispose();
        } else if (eim.getProperty("2P_Progress").equals("1")) {
            var text = cm.getText();
            var numz = Integer.parseInt(eim.getProperty("2P_QuizNum"));
            var quizThingz = quiz[numz].split("%");
            var answer = quizThingz[1];
            if (text.equals(answer)) {
                cm.sendNext("젠장...! 정답을 맞추다니!!! 이럴 순 없어!! 으아아아아!!!");
                eim.setProperty("2P_Progress", "2");
            } else {
                cm.sendNext("흐흐흐.. 틀렸다 꼬마야.. 그게 과연 정답일거라고 생각했느냐? 푸후후후후...");
                status = -1;
            }
        } else {
            cm.dispose();
        }
    } else if (status == 2) {
        var eim = cm.getPlayer().getEventInstance();
        if (eim.getProperty("2P_Progress").equals("2")) {
            cm.getPlayer().send(MainPacketCreator.showEffect("monsterPark/clear"));
            cm.getPlayer().send(MainPacketCreator.playSound("Party1/Clear"));
            cm.getPlayer().send(MainPacketCreator.getGMText(7, "잠시 후 다음 맵으로 이동됩니다."));
            cm.getPlayer().send(UIPacket.showInfo("잠시 후 다음 맵으로 이동됩니다."));    
            eim.schedule("move2P", 5000);
            
            var progress = Integer.parseInt(eim.getProperty("allProgress"));
            progress += 10;
            eim.setProperty("allProgress", progress+"");
            var it = eim.getPlayers().iterator();
            while (it.hasNext()) {
                var chr = it.next();
                chr.send(UIPacket.AchievementRatio(progress));
            }
            
            cm.dispose();
        }
    }
}

